{% extends "base.html" %}

{% block title %}Prescription Results - {{ super() }}{% endblock %}

{% block content %}
<h1>📊 Prescription Analysis Results</h1>

<div class="results-section">
    <h2>📝 Extracted Text (OCR)</h2>
    <div class="text-box">{{ extracted_text }}</div>
</div>

<div class="results-section">
    <h2>🤖 AI Analysis</h2>
    <div class="analysis-box">{{ analysis }}</div>
</div>

<div style="text-align: center; margin-top: 30px;">
    <a href="/" class="btn">🔄 Scan Another Prescription</a>
    <button onclick="copyResults()" class="btn" style="background-color: #28a745;">📋 Copy Results</button>
</div>

<script>
function copyResults() {
    const extractedText = `{{ extracted_text }}`;
    const analysis = `{{ analysis }}`;
    const fullResults = `EXTRACTED TEXT:\n${extractedText}\n\nAI ANALYSIS:\n${analysis}`;
    
    navigator.clipboard.writeText(fullResults).then(function() {
        alert('Results copied to clipboard!');
    }, function(err) {
        console.error('Could not copy text: ', err);
        // Fallback for older browsers
        const textArea = document.createElement("textarea");
        textArea.value = fullResults;
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            document.execCommand('copy');
            alert('Results copied to clipboard!');
        } catch (err) {
            alert('Could not copy results');
        }
        document.body.removeChild(textArea);
    });
}
</script>
{% endblock %}